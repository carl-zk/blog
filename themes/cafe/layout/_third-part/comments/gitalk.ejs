<% if (theme.gitalk.enable){ %>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>

<%- js('js/md5.min.js') %>

 <script type="text/javascript" defer>
      function genId() {
        var title = document.querySelector('article div.article-meta a').pathname
        if(title == null) {
            title = <%=theme.gitalk.ID%>
        }
        return title
      } 
      var gitalk = new Gitalk({
        clientID: '<%=theme.gitalk.ClientID%>',
        clientSecret: '<%=theme.gitalk.ClientSecret%>',
        repo: '<%=theme.gitalk.repo%>',
        owner: '<%=theme.gitalk.owner%>',
        admin: ['carl-zk'],
        id: md5(genId()),
        labels: ['Gitalk'],
        perPage: <%=theme.gitalk.perPage%>,
        pagerDirection: '<%=theme.gitalk.pagerDirection%>',
        createIssueManually: <%=theme.gitalk.createIssueManually%>,
        distractionFreeMode: <%=theme.gitalk.distractionFreeMode%>
      })
      gitalk.render("gitalk-container")

</script>

<% } %>

