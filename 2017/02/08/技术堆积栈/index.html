<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>技术堆积栈 | 一叶轻舟渡万江</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="[TOC] 学习博客:https:&#x2F;&#x2F;www.cnblogs.com&#x2F;moonandstar08&#x2F;p&#x2F;4865190.html jvmhttps:&#x2F;&#x2F;www.cnblogs.com&#x2F;duanxz&#x2F;tag&#x2F;JVM%E8%99%9A%E6%8B%9F%E6%9C%BA&#x2F; 集合类https:&#x2F;&#x2F;www.cnblogs.com&#x2F;skywang12345&#x2F;p&#x2F;3323085.html试题http:&#x2F;&#x2F;wik">
<meta property="og:type" content="article">
<meta property="og:title" content="技术堆积栈">
<meta property="og:url" content="https://carl-zk.github.io/blog/2017/02/08/%E6%8A%80%E6%9C%AF%E5%A0%86%E7%A7%AF%E6%A0%88/index.html">
<meta property="og:site_name" content="一叶轻舟渡万江">
<meta property="og:description" content="[TOC] 学习博客:https:&#x2F;&#x2F;www.cnblogs.com&#x2F;moonandstar08&#x2F;p&#x2F;4865190.html jvmhttps:&#x2F;&#x2F;www.cnblogs.com&#x2F;duanxz&#x2F;tag&#x2F;JVM%E8%99%9A%E6%8B%9F%E6%9C%BA&#x2F; 集合类https:&#x2F;&#x2F;www.cnblogs.com&#x2F;skywang12345&#x2F;p&#x2F;3323085.html试题http:&#x2F;&#x2F;wik">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2017-02-08T05:11:04.000Z">
<meta property="article:modified_time" content="2024-05-18T08:19:43.202Z">
<meta property="article:author" content="carl-zk">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/blog/atom.xml" title="一叶轻舟渡万江" type="application/atom+xml">
  
  
  
    
  
  
<link rel="stylesheet" href="/blog/css/style.css">

  

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92800981-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-92800981-2');
</script>




<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://carl-zk.github.io/blog"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">首页</a>
        
          <a class="main-nav-link" href="/blog/archives">归档</a>
        
          <a class="main-nav-link" href="/blog/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">一叶轻舟渡万江</a>
      </h1>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article
  id="post-技术堆积栈"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
>

  <div class="article-meta">
    <a href="/blog/2017/02/08/%E6%8A%80%E6%9C%AF%E5%A0%86%E7%A7%AF%E6%A0%88/" class="article-date">
  <time datetime="2017-02-08T05:11:04.000Z" itemprop="datePublished">2017-02-08</time>
</a>
    
  </div>
  <div class="article-inner">
     
    <header class="article-header">
      
  
    <h1 class="article-title" itemprop="name">
      技术堆积栈
    </h1>
  

    </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
       <p>[TOC]</p>
<p><strong>学习博客:</strong><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/moonandstar08/p/4865190.html">https://www.cnblogs.com/moonandstar08/p/4865190.html</a></p>
<h3 id="jvm"><a href="#jvm" class="headerlink" title="jvm"></a>jvm</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/duanxz/tag/JVM%E8%99%9A%E6%8B%9F%E6%9C%BA/">https://www.cnblogs.com/duanxz/tag/JVM%E8%99%9A%E6%8B%9F%E6%9C%BA/</a></p>
<h3 id="集合类"><a href="#集合类" class="headerlink" title="集合类"></a>集合类</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/skywang12345/p/3323085.html">https://www.cnblogs.com/skywang12345/p/3323085.html</a><br>试题<a target="_blank" rel="noopener" href="http://wiki.jikexueyuan.com/project/java-interview-bible/collection.html">http://wiki.jikexueyuan.com/project/java-interview-bible/collection.html</a></p>
<p>List,set,vector,stack;map<br>ArrayList,LinkedList,HashMap,Hashtable,TreeMap,HashSet,TreeSet<br>fail-fast:一个线程遍历集合时,该集合被另一线程修改.<br>vector线程安全,ArrayList线程不安全.<br>各集合哪种遍历方式最快.<br>强引用,软引用,弱引用,虚引用</p>
<h3 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/skywang12345/p/3479202.html">https://www.cnblogs.com/skywang12345/p/3479202.html</a><br><strong>synchronized基本原则</strong><br>一个进程访问synchronized修饰的代码块,其它进程则:<br>第一条: 当一个线程访问“某对象”的“synchronized方法”或者“synchronized代码块”时，其他线程对“该对象”的该“synchronized方法”或者“synchronized代码块”的访问将被阻塞。<br>第二条: 当一个线程访问“某对象”的“synchronized方法”或者“synchronized代码块”时，其他线程仍然可以访问“该对象”的非同步代码块。<br>第三条: 当一个线程访问“某对象”的“synchronized方法”或者“synchronized代码块”时，其他线程对“该对象”的其他的“synchronized方法”或者“synchronized代码块”的访问将被阻塞。</p>
<p>区分synchronized方法和方法块:<br>方法: public void synchronized func(){}<br>方法块: public void func(){ synchronized(this){}}<br><strong>synchronized代码块可以更精确的控制冲突限制访问区域，有时候表现更高效率。</strong><br>实例锁和全局锁:<br>在访问实力锁时,允许其它线程访问全局锁.(我刚开始认为不可以)<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/skywang12345/p/java_threads_category.html">https://www.cnblogs.com/skywang12345/p/java_threads_category.html</a></p>
<p>wait()方法是让当前进程等待.</p>
<p>尽管volatile变量的特性不错，但是volatile并不能保证线程安全的，也就是说<strong>volatile字段的操作不是原子性的</strong>，volatile变量只能保证可见性（一个线程修改后其它线程能够理解看到此变化后的结果）.</p>
<h3 id="IO-x2F-NIO"><a href="#IO-x2F-NIO" class="headerlink" title="IO&#x2F;NIO"></a>IO&#x2F;NIO</h3><p>结构图:<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zemliu/p/3269015.html">https://www.cnblogs.com/zemliu/p/3269015.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/skywang12345/p/io_01.html">https://www.cnblogs.com/skywang12345/p/io_01.html</a></p>
<h3 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h3><p><a target="_blank" rel="noopener" href="http://mm.fancymore.com/reading/mysql%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86%E9%94%A6.html">http://mm.fancymore.com/reading/mysql%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86%E9%94%A6.html</a><br>优化技巧:<a target="_blank" rel="noopener" href="https://www.douban.com/note/345871485/">https://www.douban.com/note/345871485/</a></p>
<p>建立索引的几大原则</p>
<p>1.最左前缀匹配原则，非常重要的原则，mysql会一直向右匹配直到遇到范围查询(&gt;、&lt;、between、like)就停止匹配，比如a &#x3D; 1 and b &#x3D; 2 and c &gt; 3 and d &#x3D; 4 如果建立(a,b,c,d)顺序的索引，d是用不到索引的，如果建立(a,b,d,c)的索引则都可以用到，a,b,d的顺序可以任意调整。</p>
<p>2.&#x3D;和in可以乱序，比如a &#x3D; 1 and b &#x3D; 2 and c &#x3D; 3 建立(a,b,c)索引可以任意顺序，mysql的查询优化器会帮你优化成索引可以识别的形式</p>
<p>3.尽量选择区分度高的列作为索引,区分度的公式是count(distinct col)&#x2F;count(*)，表示字段不重复的比例，比例越大我们扫描的记录数越少，唯一键的区分度是1，而一些状态、性别字段可能在大数据面前区分度就是0，那可能有人会问，这个比例有什么经验值吗？使用场景不同，这个值也很难确定，一般需要join的字段我们都要求是0.1以上，即平均1条扫描10条记录</p>
<p>4.索引列不能参与计算，保持列“干净”，比如from_unixtime(create_time) &#x3D; ’2014-05-29’就不能使用到索引，原因很简单，b+树中存的都是数据表中的字段值，但进行检索时，需要把所有元素都应用函数才能比较，显然成本太大。所以语句应该写成create_time &#x3D; unix_timestamp(’2014-05-29’);</p>
<p>5.尽量的扩展索引，不要新建索引。比如表中已经有a的索引，现在要加(a,b)的索引，那么只需要修改原来的索引即可</p>
<p>优化SQL语句的步骤</p>
<p>慢查询优化基本步骤</p>
<p>0.先运行看看是否真的很慢，注意设置SQL_NO_CACHE</p>
<p>1.where条件单表查，锁定最小返回记录表。这句话的意思是把查询语句的where都应用到表中返回的记录数最小的表开始查起，单表每个字段分别查询，看哪个字段的区分度最高</p>
<p>2.explain查看执行计划，是否与1预期一致（从锁定记录较少的表开始查询）</p>
<p>3.order by limit 形式的sql语句让排序的表优先查</p>
<p>4.了解业务方使用场景</p>
<p>5.加索引时参照建索引的几大原则</p>
<p>6.观察结果，不符合预期继续从0分析</p>
<p><strong>只有通过索引条件检索数据，InnoDB才使用行级锁，否则，InnoDB将使用表锁！</strong></p>
 
    </div>

    <footer class="article-footer">
      <!-- <a data-url="https://carl-zk.github.io/blog/2017/02/08/%E6%8A%80%E6%9C%AF%E5%A0%86%E7%A7%AF%E6%A0%88/" data-id="clwbvux5m009n64odbpmh2oq1" class="article-share-link">分享</a> -->
       
      <div id="gitalk-container"></div>
       

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


<script src="/blog/js/md5.min.js"></script>


 <script type="text/javascript" defer>
      function genId() {
        var title = document.querySelector('article div.article-meta a').pathname
        if(title == null) {
            title = location.pathname
        }
        return title
      } 
      var gitalk = new Gitalk({
        clientID: '4cb6744ec422e72a39bf',
        clientSecret: 'd0243116135375ff3b8db348dea02bc5ac88b6e3',
        repo: 'gitalk',
        owner: 'carl-zk',
        admin: ['carl-zk'],
        id: md5(genId()),
        labels: ['Gitalk'],
        perPage: 15,
        pagerDirection: 'last',
        createIssueManually: false,
        distractionFreeMode: false
      })
      gitalk.render("gitalk-container")

</script>





 
    </footer>
  </div>
    
<nav id="article-nav">
  
    <a href="/blog/2017/02/16/%E5%A4%A7%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          大话设计模式
        
      </div>
    </a>
  
  
    <a href="/blog/2016/12/19/%E5%B0%8F%E6%84%9F/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">小感</div>
    </a>
  
</nav>

  
</article>
</section>
           
    <aside id="sidebar">
  
    

  
    
    <div class="widget-wrap">
    
      <div class="widget" id="toc-widget-fixed">
      
        <strong class="toc-title">文章目录</strong>
        <div class="toc-widget-list">
              <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#jvm"><span class="toc-number">1.</span> <span class="toc-text">jvm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E7%B1%BB"><span class="toc-number">2.</span> <span class="toc-text">集合类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">多线程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IO-x2F-NIO"><span class="toc-number">4.</span> <span class="toc-text">IO&#x2F;NIO</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql"><span class="toc-number">5.</span> <span class="toc-text">mysql</span></a></li></ol>
          </div>
      </div>
    </div>

  
    

  
    
  
    
  
    

  
    
  
    <!--微信公众号二维码-->


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2016 - 2025 carl-zk<!--&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a> -->
    </div>
  
     <div id="footer-right">
      <!--联系方式&nbsp;|&nbsp; -->
      富强民主文明和谐自由平等公正法治爱国敬业诚信友善
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">首页</a>
  
    <a href="/blog/archives" class="mobile-nav-link">归档</a>
  
    <a href="/blog/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/blog/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
    

<script src="/blog/js/is.js"></script>



  
<script src="/blog/jquery/jquery.min.js"></script>

  
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">

  
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>



  <script src='https://cdnjs.cloudflare.com/ajax/libs/mermaid/7.1.2/mermaid.min.js'></script>
  <!-- script src="/blog/js/mermaid.min.js" -->
  <script>
    if (window.mermaid) {
      mermaid.initialize({theme: 'forest'});
    }
  </script>


<script src="/blog/js/script.js"></script>


<script src="/blog/js/elevator.js"></script>

  </div>
</body>
</html>